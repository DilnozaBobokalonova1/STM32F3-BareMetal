#include "stm32f3xx.h"

#define GPIOAEN					(1U<<17)
#define GPIOEEN					(1U<<21)

#define PIN15					(1U<<15)
#define LED_PIN					PIN15
#define PIN8					(1U<<8)
#define LED_PIN8				PIN8

#define PIN0					(1U<<0)
#define BTN_PIN					PIN0


//B1 USER: user and wake-up button connected to the I/O PA0
//when we press the push button, the LED comes on
int main(void) {
	/*Enable clock access to GPIOA & GPIOE*/
	RCC->AHBENR |= GPIOAEN;
	RCC->AHBENR |= GPIOEEN;
	/*Set PE8 & PE15 as Output Pins so set MODER bits 16/17, 30/31 */
	GPIOE->MODER |= (1U<<30);
	GPIOE->MODER &=~(1U<<31);
	/*Set PA0 as Input Pin so set MODER bits 0,1 to 00*/
	GPIOA->MODER &=~(1U<<0);
	GPIOA->MODER &=~(1U<<1);

	while(1) {
		//note that BTN is by default active low
		if (GPIOA->IDR & BTN_PIN) {
			//turn on LED
			GPIOE->BSRR = LED_PIN;
		} else {
			//turn off LED
			GPIOE->BSRR = (1U<<31);
		}
	}

}
